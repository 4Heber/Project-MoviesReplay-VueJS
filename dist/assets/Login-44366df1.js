import{H as y}from"./HeaderComp-0e4143e1.js";import{_,r as b,o as h,c as p,b as k,a as e,t as w,d as x,h as a,w as v}from"./index-7d807eb5.js";const E={name:"Login",components:{HeaderComp:y},data(){return{users:[],usernameError:{status:!1,msg:""},passwordError:{status:!1,msg:""}}},created(){fetch("http://localhost:3000/users").then(s=>s.json()).then(s=>{this.users=s})},methods:{async loginAttempt(){const s="http://localhost:3000/";async function i(r){try{return await(await fetch(r+"users")).json()}catch(t){console.error("Login.vue - Fallo en GET ALL "+t)}}var f=await i(s),u=document.getElementById("username").value,o=document.getElementById("password").value;if(u=="")return this.usernameError.msg="El campo no puede estar vacío.",this.usernameError.status=!0,!1;if(this.usernameError.msg="",this.usernameError.status=!1,o=="")return this.passwordError.msg="El campo no puede estar vacío.",this.passwordError.status=!0,!1;function c(){let r="",t="0123456789ABCDEFGHIJKLMNÑOPQRSTUVWXYZabcdefghijklmnñopqrstuvwxyz-_";for(var d=0;d<12;d++)r+=t.charAt(Math.floor(Math.random()*t.length));return r}async function m(r){const t=c();document.cookie=`authCookie=${t}; max-age=3600; path=/; SameSite=None; Secure`;const d={cookie:t};await fetch(s+"users/"+r.id,{method:"PATCH",body:JSON.stringify(d),headers:{"Content-Type":"application/json; charset=UTF-8"}}).then(g=>{g.json()}).then(g=>{console.log(g,"Login.vue - PATCH data reponse")}),window.location.href="http://localhost:5173/"}var l=!1,n;if(f.forEach(r=>{r.name==u&&(l=!0,n=r)}),l)if(o===n.password)m(n);else return this.passwordError.msg="Contraseña incorrecta",this.passwordError.status=!0,!1;else return this.usernameError.msg="El usuario no existe en nuestros registros...",this.usernameError.status=!0,!1}}},C={class:"grid grid-cols-12 grid-rows-6 gap-x-8 w-full h-screen dark:bg-gradient-to-br dark:from-d-surface dark:via-d-theme-via dark:to-d-theme-to bg-gradient-to-br from-l-theme-from to-l-theme-to"},L={class:"col-start-7 row-start-2 col-span-4 row-span-4 p-16 dark:bg-gradient-to-br dark:from-d-background dark:via-d-surface dark:to-d-surface rounded-tr-xl rounded-br-xl"},N={class:"mb-6"},A=e("label",{for:"username",class:"block mb-2 text-sm lg:text-base font-medium text-l-soft-black dark:text-d-soft-white"},"Usuario",-1),T=e("input",{type:"text",id:"username",class:"mb-2 shadow-sm bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-d-soft-white focus:border-d-soft-white block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-d-soft-white dark:focus:border-d-soft-white dark:shadow-sm-light",placeholder:"Nombre usuario",required:""},null,-1),H={key:0,class:"text-sm dark:text-d-warning"},S={class:"mb-6"},j=e("label",{for:"password",class:"block mb-2 text-sm lg:text-base font-medium text-gray-900 dark:text-white"},"Contraseña",-1),B=e("input",{type:"password",id:"password",class:"mb-2 shadow-sm bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-d-soft-white focus:border-d-soft-white block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-d-soft-white dark:focus:border-d-soft-white dark:shadow-sm-light",required:""},null,-1),U={key:0,class:"text-sm dark:text-d-warning"},I={class:"mb-8 text-sm dark:text-d-muted"},V=e("div",{class:"col-start-3 row-start-2 col-span-4 row-span-4 relative rounded-tl-xl rounded-bl-xl overflow-hidden bg-cover bg-center bg-[url('src/assets/Images/Login-register-banner/Section_4.png')]"},[e("div",{class:"absolute inset-y-0 p-16 bg-gradient-to-bl from-d-background via-transparent dark:to-d-surface backdrop-brightness-50"},[e("p",{class:"text-2xl font-sans dark:text-d-soft-white select-none"},[a(" Únete hoy mismo a la comunidad de los amantes del cine iniciando sesión."),e("br"),e("br"),a(" Obtén acceso exclusivo a una amplia biblioteca de críticas, valoraciones y recomendaciones de películas."),e("br"),e("br"),a(" Comparte tus opiniones, descubre nuevas películas y conéctate con otros entusiastas del cine. "),e("br"),e("br"),a(" No pierdas la oportunidad de mejorar tu experiencia cinematográfica. ")])])],-1);function R(s,i,f,u,o,c){const m=b("HeaderComp"),l=b("router-link");return h(),p("div",C,[k(m,{renderLogotype:!0,class:"col-start-3 col-end-11 mt-6"}),e("form",L,[e("div",N,[A,T,o.usernameError.status?(h(),p("p",H,w(o.usernameError.msg),1)):x("",!0)]),e("div",S,[j,B,o.passwordError.status?(h(),p("p",U,w(o.passwordError.msg),1)):x("",!0)]),e("p",I,[a(" Todavía no tienes cuenta? "),k(l,{to:{name:"register"},class:"dark:text-d-secondary underline-offset-4 cursor-pointer hover:underline hover:opacity-75 transition ease-in duration-150"},{default:v(()=>[a("Registrarse.")]),_:1})]),e("button",{type:"button",onClick:i[0]||(i[0]=(...n)=>c.loginAttempt&&c.loginAttempt(...n)),class:"font-bold lg:text-base text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none rounded-lg text-sm px-5 py-2.5 text-center dark:text-d-surface dark:bg-d-secondary dark:hover:opacity-75 transition ease-in duration-150"},"Iniciar sesión")]),V])}const F=_(E,[["render",R]]);export{F as default};
